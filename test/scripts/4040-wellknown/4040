# ESMTP WELLNOWN server response
#
# when WELLKNOWN leaves EXPERIMENTAL, add standalone tests
# for ${xtextd:str} to 0002
#
#
exim -DSERVER=server -bd -oX PORT_D:PORT_D2
****
#
client 127.0.0.1 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN acme-response
??? 250-SIZE
??? 250-
??? 250-
??? 250
QUIT
??? 221
****
#
# not advertised conditional on hosts_wellknown
client HOSTIPV4 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250 HELP
QUIT
??? 221
****
#
# deny by acl
client 127.0.0.1 PORT_D2
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN acme-response
??? 550
QUIT
??? 221
****
#
# nonexistent file
client 127.0.0.1 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN badfile
??? 550
QUIT
??? 221
****
#
killdaemon
#
exim -DSERVER=server -DOPT=,key=path -bd -oX PORT_D:PORT_D2
****
#
# dsearch with key=path permission
# basic good file
client 127.0.0.1 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN acme-response
??? 250-SIZE
??? 250-
??? 250-
??? 250
QUIT
??? 221
****
#
# subdir/good file
client 127.0.0.1 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN sub/acme-response
??? 250-SIZE
??? 250-
??? 250-
??? 250
QUIT
??? 221
****
#
# nonexistent file
client 127.0.0.1 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN sub/badfile
??? 550
QUIT
??? 221
****
#
# dotdot trap
client 127.0.0.1 PORT_D
??? 220
EHLO test
??? 250-
??? 250-SIZE
??? 250-LIMITS
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-WELLKNOWN
??? 250 HELP
WELLKNOWN ../badfile
??? 550
QUIT
??? 221
****
#
killdaemon
