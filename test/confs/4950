# Exim test configuration 4950

.include DIR/aux-var/std_conf_prefix


# ----- Main settings -----

acl_smtp_rcpt = check_recipient
acl_smtp_data = check_message

domainlist local_domains = test.ex
qualify_domain = test.ex


# ----- Routers -----

begin routers

lookuphost:
  driver = dnslookup
  domains = ! +local_domains
  translate_ip_address = "\
    ${if eq {${mask:$host_address/24}}{V4NET.11.12.0/24}{1.2.3.4}\
    {${lookup{${mask:$host_address/27}}lsearch{DIR/aux-var/TESTNUM.tr}{$value}fail}}}"
  transport = smtp
  no_more


# ----- Transports -----

begin transports

smtp:
  driver = smtp


# End
