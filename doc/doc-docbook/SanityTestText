#!/bin/sh

# Portability note:
# This tool is only used in building spec.txt for a release, not used as
# part of the normal build/install process, so only Maintainers are affected
# by requirements here.
#
# This tool requires pcregrep(1).

filename="$1"

pcregrep -q '[^\x{20}-\x{7E}]' "$filename"

grepstatus=$?
case $grepstatus in
0)
	echo >&2 "$0: found non-ASCII characters in $filename"
	exit 1
	;;
1)
	exit 0
	;;
2)
	echo >&2 "$0: problem checking for non-ASCII characters in $filename"
	exit 2
	;;
*)
	echo >&2 "$0: unhandled return value from pcregrep: $grepstatus"
	exit 3
	;;
esac
